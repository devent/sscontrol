<VirtualHost 192.168.0.50:443>

    # domain test1.com
    ServerName test1.com
    DocumentRoot /tmp/var/www/test1.com/web
    <Directory /tmp/var/www/test1.com/web>
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>

    SSLEngine on
    SSLCertificateFile /tmp/var/www/test1.com/ssl/cert_crt.txt
    SSLCertificateKeyFile /tmp/var/www/test1.com/ssl/cert_key.txt

    # redirect to www https
    ServerAlias www.test1.com
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^test1\.com$ [NC]
    RewriteRule ^(.*)$ https://www.test1.com$1 [L,R=301]

    Alias / /tmp/var/www/test1.com/web/

    # auth private
    <Location /private>
        AuthType digest
        AuthName "private"
        AuthDigestDomain /private
        AuthDigestProvider file
        AuthUserFile /tmp/var/www/test1.com/auth/private.passwd
        AuthGroupFile /tmp/var/www/test1.com/auth/private.group
        Require valid-user
        Require group admin
    </Location>

</VirtualHost>
